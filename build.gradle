plugins {
    id 'maven-publish'
    id 'java'
}

apply plugin: 'maven-publish'

version = 'all-1.3.4+5'
group = 'me.fengming.vaultpatcher' // http://maven.apache.org/guides/mini/guide-naming-conventions.html

println "Java: ${System.getProperty 'java.version'}, JVM: ${System.getProperty 'java.vm.version'} (${System.getProperty 'java.vendor'}), Arch: ${System.getProperty 'os.arch'}"

jar {
    from(configurations.runtimeClasspath.filter {
        (it.name == 'Fabric-ASM-2.3.jar')
    }) {
        into 'META-INF/jars'
    }
}

java {
    toolchain {
        languageVersion.set(JavaLanguageVersion.of(8))
    }
    disableAutoTargetJvm()
}

jar {
    baseName 'vaultpatcher'
}

tasks.compileJava {
    sourceCompatibility = "1.8"
    targetCompatibility = "1.8"
    options.encoding = 'UTF-8'
}

repositories {
    mavenCentral()
    maven {
        url "https://maven.fabricmc.net/"
    }
    maven {
        url "https://maven.minecraftforge.net/"
    }
    maven {
        url 'https://jitpack.io/'
    }
}

dependencies {
    implementation 'org.jetbrains:annotations:23.0.0'
    implementation 'com.google.code.gson:gson:2.10.1'
    implementation 'org.ow2.asm:asm:6.2'
    implementation 'org.apache.logging.log4j:log4j-api:2.15.0'
    implementation 'com.google.code.gson:gson:2.10.1'

    implementation 'net.fabricmc:fabric-loader:0.14.12'
    implementation 'cpw.mods:modlauncher:8.1.3'

    implementation 'com.github.Chocohead:Fabric-ASM:2.3'
}

